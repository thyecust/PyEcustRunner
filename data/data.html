<!DOCTYPE html>

<head>
    <title>Data</title>
    <meta author="thyecust">
    <meta charset="utf-8">
</head>

<body>


    <p id="output"></p>

    <script
        src='https://webapi.amap.com/maps?v=2.0&key=1070e01f2466ca698e5f96d1402a712f&plugin=AMap.PolygonEditor'></script>
    <script type="text/javascript">

        // 显示和隐藏路口


        // 前端可调用的 JS API
        function ajax(method, url, next) {
            var xhr = new XMLHttpRequest();
            xhr.open(method, url);
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    str = xhr.responseText;
                    next(str);
                }
            }
            xhr.send();
        }

        function position(i) {
            p = new AMap.LngLat(cross.record[i][1], cross.record[i][2]);
            return p;
        }
        function distance(i, j) {
            return position(i).distance(position(j))
        }
        function add_edge(i, j) {
            graph.adj[i].push([j]);
            graph.adj[j].push([i]);
            edge++;
        }
        function dist_graph(cross, graph) {
            for (var k = 0; k < graph.adj.length; k++) {
                for (var i = 1; i < graph.adj[k].length; i++) {
                    dist = distance(k, graph.adj[k][i][0]);
                    dist = Math.round(dist);
                    graph.adj[k][i].push(dist);
                }
            }
        }

        var cross = {
    "total":130,
    "record":[
        [0,121.50499,30.83198,"e"],
        [1,121.505009,30.831467,"e-lib"],
        [2,121.505602,30.831465,"a-c"],
        [3,121.506659,30.831437,"a-b-c-d"],
        [4,121.506674,30.830981,"c-d"],
        [5,121.504971,30.832595,"5-e"],
        [6,121.505169,30.83261,"1-5"],
        [7,121.50542,30.832592,"1-a"],
        [8,121.505561,30.831734,"a"],
        [9,121.506639,30.832019,"a-b-1"],
        [10,121.506651,30.831908,"a-b-2"],
        [11,121.507267,30.831866,"b"],
        [12,121.507507,30.832289,"b-p-1"],
        [13,121.507867,30.83213,"b-p-2"],
        [14,121.507925,30.831437,"b-d-p"],
        [15,121.507919,30.830978,"d-p"],
        [16,121.50663,30.832473,"1-a-b"],
        [17,121.50662,30.834717,"13-r1"],
        [18,121.506635,30.835504,"13-dh-3"],
        [19,121.50662,30.834325,"9-13-r1"],
        [20,121.506636,30.833901,"9-p-r1"],
        [21,121.506622,30.833484,"1-9-p"],
        [22,121.506627,30.833162,"1-p"],
        [23,121.507,30.835481,"r1-1"],
        [24,121.507452,30.835028,"r1-2"],
        [25,121.507168,30.834822,"r1-3"],
        [26,121.507871,30.833867,"p-r1-1"],
        [27,121.508271,30.833848,"p-r1-2"],
        [28,121.508566,30.833844,"p-r1-3"],
        [29,121.507694,30.833167,"p-1"],
        [30,121.508276,30.833167,"p-2"],
        [31,121.508267,30.832952,"p-3"],
        [32,121.509347,30.832976,"p-4"],
        [33,121.508609,30.83252,"p-5"],
        [34,121.509635,30.832677,"p-6"],
        [35,121.508591,30.83205,"p-7"],
        [36,121.509428,30.832034,"p-8"],
        [37,121.510211,30.83209,"p-9"],
        [38,121.508663,30.831539,"p-10"],
        [39,121.509644,30.831009,"p-11"],
        [40,121.510202,30.831009,"p-12"],
        [41,121.504464,30.836415,"gate-ne"],
        [42,121.504653,30.836062,"dh-gate-1"],
        [43,121.504993,30.835814,"dh-gate-2"],
        [44,121.505814,30.835509,"13-dh-2"],
        [45,121.505188,30.835515,"13-dh-1"],
        [46,121.503484,30.835509,"17-dh-1"],
        [47,121.504882,30.835508,"17-dh-2"],
        [48,121.505654,30.830704,"c"],
        [49,121.502772,30.835154,"h-1"],
        [50,121.501605,30.833924,"h-2"],
        [51,121.502793,30.834518,"h-3"],
        [52,121.501758,30.833727,"h-4"],
        [53,121.502803,30.834291,"h-5"],
        [54,121.503428,30.834324,"h-6"],
        [55,121.503569,30.83244,"e-i-5"],
        [56,121.503537,30.832904,"s5"],
        [57,121.503458,30.833858,"23"],
        [58,121.504246,30.833799,"21"],
        [59,121.504238,30.833477,"5"],
        [60,121.50493,30.833498,"5-cn"],
        [61,121.50427,30.834001,"cn-1"],
        [62,121.504917,30.834018,"cn-2"],
        [63,121.504255,30.834231,"17"],
        [64,121.504911,30.83424,"h-7"],
        [65,121.505171,30.834228,"h-8"],
        [66,121.505903,30.834342,"13"],
        [67,121.505895,30.833501,"1-9-2"],
        [68,121.505164,30.833516,"1-9-1"],
        [69,121.499905,30.832926,"r2-1"],
        [70,121.500786,30.833438,"r2-2"],
        [71,121.501016,30.831458,"r2-3"],
        [72,121.501821,30.832,"r2-4"],
        [73,121.501112,30.831248,"i-1"],
        [74,121.502004,30.831796,"i-2"],
        [75,121.502899,30.832215,"i-3"],
        [76,121.501457,30.8308,"i-4"],
        [77,121.502395,30.831377,"i-5"],
        [78,121.503581,30.831956,"i-6"],
        [79,121.501713,30.830435,"i-7"],
        [80,121.502713,30.830959,"i-8"],
        [81,121.503221,30.83128,"i-9"],
        [82,121.497096,30.831304,"n1"],
        [83,121.498102,30.83192,"n2"],
        [84,121.498882,30.832341,"n3"],
        [85,121.499091,30.830623,"n4"],
        [86,121.499848,30.831058,"n5"],
        [87,121.498565,30.829458,"n6"],
        [88,121.499476,30.829988,"n7"],
        [89,121.50022,30.830486,"n8"],
        [90,121.499035,30.828889,"n9"],
        [91,121.499807,30.829391,"n10"],
        [92,121.500854,30.829942,"n11"],
        [93,121.501188,30.830131,"n12"],
        [94,121.500783,30.830329,"n13"],
        [95,121.502175,30.829695,"x1"],
        [96,121.499908,30.827717,"x2"],
        [97,121.500732,30.828186,"x3"],
        [98,121.50172,30.828724,"x4"],
        [99,121.50258,30.829195,"x5"],
        [100,121.500636,30.8268,"x6"],
        [101,121.501456,30.827256,"x7"],
        [102,121.502396,30.827789,"x8"],
        [103,121.503329,30.828314,"x9"],
        [104,121.501227,30.826017,"x10"],
        [105,121.502024,30.826504,"x11"],
        [106,121.502961,30.827016,"x12"],
        [107,121.503923,30.827542,"x13"],
        [108,121.503999,30.82871,"s1"],
        [109,121.504653,30.829069,"s2"],
        [110,121.505297,30.829437,"s3"],
        [111,121.504946,30.82873,"s4"],
        [112,121.50565,30.828885,"s5"],
        [113,121.505312,30.8283,"s6"],
        [114,121.50582,30.828608,"s7"],
        [115,121.50574,30.82778,"s8"],
        [116,121.506185,30.828016,"s9"],
        [117,121.507925,30.83071,"t1"],
        [118,121.507942,30.830391,"t2"],
        [119,121.508224,30.830398,"t3"],
        [120,121.509723,30.83039,"t4"],
        [121,121.507962,30.830145,"t5"],
        [122,121.508015,30.82986,"t6"],
        [123,121.508793,30.829587,"t7"],
        [124,121.509622,30.829991,"t8"],
        [125,121.508556,30.829212,"t9"],
        [126,121.510209,30.830119,"t10"],
        [127,121.503594,30.831477,"e-i-lib"],
        [128,121.503594,30.831943,"e-i"],
        [129,121.503539,30.832904,"25"]

    ]
};

        var vertex = cross.total;

        var graph = {
            'vertex':vertex,
            'adj':[]
        };

        for (var i=0; i<vertex; i++){
            graph.adj.push([i]);
        }

        edge = 0;

        graph.edge = edge;

        ae = add_edge;

        add_edge(8,2);
        add_edge(0,5);
        add_edge(1,2);
        ae(0,1);
        ae(8,7);
        ae(7,6);
        ae(6,5);
        ae(7,16);
        ae(9,16);
        ae(8,9);
        ae(9,10);
        ae(10,3);
        ae(3,2);
        ae(2,48);
        ae(48,4);
        ae(4,3);
        ae(4,15);
        ae(3,14);
        ae(10,11);
        ae(11,12);
        ae(16,22);
        ae(16,12);
        ae(12,13);
        ae(13,14);
        ae(14,15);
        ae(21,22);
        ae(21,20);
        ae(22,29);
        ae(29,30);
        ae(12,29);
        ae(30,31);
        ae(30,27);
        ae(27,26);
        ae(27,28);
        ae(20,26);
        ae(19,20);
        ae(19,17);
        ae(17,18);
        ae(18,23);
        ae(23,24);
        ae(24,25);
        ae(25,26);
        ae(17,25);
        ae(24,28);
        ae(28,32);
        ae(31,32);
        ae(26,29);
        ae(13,31);
        ae(31,33);
        ae(33,35);
        ae(33,36);
        ae(35,36);
        ae(13,35);
        ae(38,35);
        ae(38,36);
        ae(14,38);
        ae(34,32);
        ae(34,36);
        ae(36,39);
        ae(37,34);
        ae(37,40);
        ae(39,40);
        ae(15,39);
        ae(1,127);
        ae(128,127);
        ae(128,55);
        ae(128,0);
        ae(128,78);
        ae(5,55);
        ae(55,129);
        ae(55,75);
        ae(57,129);
        ae(57,54);
        ae(53,54);
        ae(54,46);
        ae(46,49);
        ae(49,51);
        ae(51,53);
        ae(51,50);
        ae(50,52);
        ae(52,53);
        ae(52,75);
        ae(75,74);
        ae(75,78);
        ae(77,74);
        ae(77,76);
        ae(77,78);
        ae(77,80);
        ae(73,74);
        ae(73,76);
        ae(79,76);
        ae(79,80);
        ae(80,127);
        ae(74,72);
        ae(73,71);
        ae(69,70);
        ae(70,72);
        ae(72,71);
        ae(71,69);
        ae(70,50);
        ae(46,47);
        ae(47,45);
        ae(45,44);
        ae(44,18);
        ae(47,64);
        ae(64,65);
        ae(65,45);
        ae(65,66);
        ae(66,19);
        ae(65,68);
        ae(68,67);
        ae(67,21);
        ae(6,68);
        ae(5,60);
        ae(60,62);
        ae(62,64);
        ae(59,60);
        ae(59,61);
        ae(61,63);
        ae(63,54);
        ae(63,64);
        ae(61,62);
        ae(84,69);
        ae(89,73);
        ae(93,79);
        ae(48,117);
        ae(48,110);
        ae(117,15);
        ae(40,126);
        ae(41,42);
        ae(42,46);
        ae(42,43);
        ae(43,45);

        ae(82,83);
        ae(82,87);
        ae(83,84);
        ae(83,85);
        ae(86,84);
        ae(85,86);
        ae(85,88);
        ae(87,88);
        ae(88,89);
        ae(87,90);
        ae(90,91);
        ae(91,88);
        ae(91,92);
        ae(92,93);
        ae(92,94);
        ae(93,94);
        ae(94,89);
        ae(92,95);
        ae(95,99);

        ae(96,97);
        ae(97,98);
        ae(98,99);
        ae(90,96);
        ae(91,97);
        ae(92,98);

        ae(96,100);
        ae(97,101);
        ae(98,102);
        ae(100,101);
        ae(101,102);
        ae(102,103);
        ae(100,104);
        ae(101,105);
        ae(102,106);
        ae(103,107);
        ae(104,105);
        ae(105,106);
        ae(106,107);
        ae(107,108);

        ae(103,108);
        ae(108,99);
        ae(108,109);
        ae(108,111);
        ae(107,113);
        ae(109,110);
        ae(109,111);
        ae(111,113);
        ae(113,115);
        ae(110,112);
        ae(112,114);
        ae(114,116);
        ae(111,112);
        ae(113,114);
        ae(115,116);

        ae(112,121);
        ae(114,122);
        ae(117,118);
        ae(118,119);
        ae(118,121);
        ae(121,122);
        ae(122,125);
        ae(125,126);
        ae(119,120);
        ae(120,126);
        ae(119,123);
        ae(123,124);
        ae(124,126);


        dist_graph(cross,graph);

        graph.edge = edge;
        document.querySelector("#output").innerHTML = JSON.stringify(graph);

        



    </script>
</body>